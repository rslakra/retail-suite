<h1>Add Customer</h1>

<form (ngSubmit)="onSubmit()" #customerForm="ngForm">
  <div class="row mb-3">
    <label for="firstname" class="col-sm-2 col-form-label">First Name</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="firstname" 
             [(ngModel)]="customer.firstname" name="firstname" 
             placeholder="Your first name" required>
    </div>
  </div>
  <div class="row mb-3">
    <label for="lastname" class="col-sm-2 col-form-label">Last Name</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="lastname"
             [(ngModel)]="customer.lastname" name="lastname" 
             placeholder="Your last name" required>
    </div>
  </div>
  <div class="row mb-3">
    <label for="street" class="col-sm-2 col-form-label">Street</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="street"
             [(ngModel)]="customer.address.street" name="street" 
             placeholder="Street">
    </div>
  </div>
  <div class="row mb-3">
    <label for="city" class="col-sm-2 col-form-label">City</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="city"
             [(ngModel)]="customer.address.city" name="city" 
             placeholder="City">
    </div>
  </div>
  <div class="row mb-3">
    <label for="zipCode" class="col-sm-2 col-form-label">ZIP Code</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="zipCode"
             [(ngModel)]="customer.address.zipCode" name="zipCode" 
             placeholder="ZIP or Postal Code">
      <button type="button" class="btn btn-secondary mt-2" (click)="geocodeAddress()">
        Geocode Address
      </button>
    </div>
  </div>
  <div class="row mb-3">
    <label for="latitude" class="col-sm-2 col-form-label">Latitude</label>
    <div class="col-sm-10">
      <input type="number" class="form-control" id="latitude" 
             [(ngModel)]="customer.address.location.latitude" 
             name="latitude" placeholder="Latitude" required>
      <div class="mt-2">
        <button type="button" class="btn btn-secondary me-2" (click)="getMyLocation()">
          Get My Location
        </button>
        <button type="button" class="btn btn-secondary" (click)="reverseGeocodeCoordinates()">
          Populate Address
        </button>
      </div>
    </div>
  </div>
  <div class="row mb-3">
    <label for="longitude" class="col-sm-2 col-form-label">Longitude</label>
    <div class="col-sm-10">
      <input type="number" class="form-control" id="longitude" 
             [(ngModel)]="customer.address.location.longitude" 
             name="longitude" placeholder="Longitude" required>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-sm-10 offset-sm-2">
      <button type="button" class="btn btn-secondary me-2" (click)="goBack()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="!customerForm.valid">
        Add Customer
      </button>
    </div>
  </div>
</form>

<div class="mt-4">
  <google-map 
    [options]="mapOptions" 
    [width]="'100%'" 
    [height]="'400px'"
    (mapClick)="onMapClick($event)">
    <map-marker [position]="markerPosition"></map-marker>
  </google-map>
</div>

